syntax = "proto3";

package ws;

option go_package = "fish-game/ws;ws";

message WSMessage {
  string event = 1;
  bytes data = 2;
}

message ShootRequest {
  int32 bullet_id = 1;
  float x = 2;
  float y = 3;
}

message FishGenerate {
  int32 id = 1;
  float x = 2;
  float y = 3;
}

message FishKilled {
  int32 fish_id = 1;
  int32 by_user_id = 2;
}

message CoinUpdate {
  int32 user_id = 1;
  int32 coins = 2;
}

message GoldUpdate {
  string user_id = 1;
  int32 gold = 2;
}

message FishPosition {
  int32 id = 1;
  float x = 2;
  float y = 3;
}

message FishPositionUpdate {
  repeated FishPosition positions = 1;
}

message UseSkillRequest {
  string user_id = 1;
  string skill_type = 2;
  float x = 3; // 坐标（可选）
  float y = 4;
}


message SkillUsed {
  string user_id = 1;
  string skill_type = 2;
}

message FishFreeze {
  int32 duration_ms = 1; // 冻结持续时间（毫秒）
}

message FishLocked {
  string user_id = 1;
  int32 fish_id = 2;
}

message SpeedUp {
  string user_id = 1;
  int32 duration = 2;
}
message RadarResult {
  string user_id = 1;
  float centerX = 2;
  float centerY = 3;
  float radius = 4;
  repeated FishPosition fish_found = 5;
}

message AreaSlowDown {
  float centerX = 1;
  float centerY = 2;
  float radius = 3;
  int32 duration = 4; // 秒
}

message MagnetEffect {
  string user_id = 1;
  float center_x = 2;
  float center_y = 3;
  float radius = 4;
}

message EMPBlastEffect {
  string user_id = 1;
  float center_x = 2;
  float center_y = 3;
  float radius = 4;
  int32 duration = 5; // 秒
}

message Invisibility {
  string user_id = 1;
  int32 duration = 2; // 秒
}

message FishGrowEffect {
  string user_id = 1;
  float center_x = 2;
  float center_y = 3;
  float radius = 4;
  float scale = 5;
}
